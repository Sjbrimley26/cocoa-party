!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="./",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"area",(function(){return T})),n.d(r,"circumcircle",(function(){return X})),n.d(r,"edges",(function(){return C})),n.d(r,"inscribedCircle",(function(){return D})),n.d(r,"irregularApothem",(function(){return B})),n.d(r,"perimeter",(function(){return N})),n.d(r,"regularApothem",(function(){return J})),n.d(r,"vertices",(function(){return K})),n.d(r,"midpoints",(function(){return A})),n.d(r,"normals",(function(){return V})),n.d(r,"bottom",(function(){return U}));var i={};n.r(i),n.d(i,"Polygon",(function(){return R})),n.d(i,"RegularPolygon",(function(){return Z})),n.d(i,"IrregularPolygon",(function(){return nt})),n.d(i,"props",(function(){return r}));var o={};n.r(o),n.d(o,"EqTriangle",(function(){return tt})),n.d(o,"Rectangle",(function(){return ot})),n.d(o,"Circle",(function(){return H})),n.d(o,"Hexagon",(function(){return ct})),n.d(o,"Square",(function(){return ut})),n.d(o,"Pentagon",(function(){return dt})),n.d(o,"Octagon",(function(){return ft})),n.d(o,"prototypes",(function(){return i})),n.d(o,"Triangle",(function(){return gt}));const s=t=>t[0],c=t=>e=>{if(Array.isArray(e))return[...e].sort(t)},h=t=>e=>e[t],u=(t,e)=>parseFloat(t.toFixed(e)),a=t=>e=>u((100*t+100*e)/100,2),d=t=>e=>u((100*t-100*e)/100,2),p=t=>e=>u(t*e,2),f=t=>e=>u(100*t/(100*e),2),l=t=>e=>u(Math.pow(t,e),2),g=t=>u(Math.sqrt(t),2),y=t=>u(Math.cos(t),2),x=t=>u(Math.sin(t),2),m=(t,e=0)=>t.reduce((t,e)=>t+e,e),b=t=>t.reduce((t,e)=>e>t?e:t,Number.MIN_SAFE_INTEGER),v=t=>t.reduce((t,e)=>e<t?e:t,Number.MAX_SAFE_INTEGER),M=t=>t*(Math.PI/180),P=t=>{return e=t,u(Math.atan(e),2)*(180/Math.PI);var e};function O({direction:t,magnitude:e}){const n=t>2*Math.PI?t-2*Math.PI:t<-2*Math.PI?t+2*Math.PI:t;this.direction=n,this.magnitude=e}O.prototype.add=function(t){const{x:e,y:n}=this,{x:r,y:i}=t,o=e+r,s=n+i;let c=u(Math.atan(s/o),2);c=isNaN(c)?0:c;const h=u(Math.sqrt(Math.pow(o,2)+Math.pow(s,2)),2);return this.direction=c,this.magnitude=h,this},O.prototype.subtract=function(t){return this.add(t.inverse())},O.prototype.scale=function(t){return this.magnitude=this.magnitude*t,this},O.prototype.dotProduct=function(t){const e=this.x,n=this.y,r=t.x,i=t.y;return a(e*r)(n*i)},O.prototype.crossProduct=function(t){const{x:e,y:n}=this,{x:r,y:i}=t;return d(e*i)(n*r)},O.prototype.getPerpendicular=function(){const t=this.y,e=-this.x,n=g(Math.pow(t,2)+Math.pow(e,2)),r=u(Math.atan(e/t),2);return this.direction=r,this.magnitude=n,this},O.prototype.inverse=function(){return this.direction=a(this.direction,Math.PI),this},Object.defineProperties(O.prototype,{x:{get:function(){return Math.round(this.magnitude*Math.cos(this.direction))}},y:{get:function(){return Math.round(this.magnitude*Math.sin(this.direction))}}}),O.of=(t,e)=>new O({direction:t,magnitude:e});var j=O;function w(t,e){this.x=Math.round(t),this.y=Math.round(e)}w.prototype.toVector=function(){const{x:t,y:e}=this,n=g(Math.pow(t,2)+Math.pow(e,2)),r=u(Math.atan(e/t),2);return j.of(r,n)},w.prototype.addVector=function(t){const{x:e,y:n}=t;return L(e+this.x,n+this.y)},w.prototype[Symbol.iterator]=function*(){yield this.x,yield this.y};const L=function(t,e){return new w(t,e)};L.orientation=(t,e,n)=>{const r=(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y);return 0==r?0:r>0?1:2};var I=L;function S(t,e){this.start=t,this.end=e}S.prototype.isPointOnLine=function(t){const{x:e,y:n}=this.start;return p(t.x-e)(this.slope)===d(t.y)(n)},S.prototype.intersectsWith=function(t){const{start:e,end:n}=this,{start:r,end:i}=t,o=I.orientation(e,n,r),s=I.orientation(e,n,i),c=I.orientation(r,i,e),h=I.orientation(r,i,n);return o!=s&&c!=h||(!(0!=o||!this.isPointOnLine(r))||(!(0!=s||!this.isPointOnLine(i))||(!(0!=c||!t.isPointOnLine(e))||!(0!=h||!t.isPointOnLine(n)))))},S.prototype.getPointOfIntersection=function(t){if(!this.intersectsWith(t)||this.slope==t.slope)return;const{start:e,slope:n}=this,{x:r,y:i}=e,{start:o,slope:s}=t,{x:c,y:h}=o,a=u((n*r-s*c+h-i)/(n-s),2),d=u((n*s*(c-r)+s*i-n*h)/(s-n),2);return I(a,d)},S.prototype.getPerpendicular=function(){const{slope:t,length:e,center:n}=this,{x:r,y:i}=n;let o,s,c,h,u,a=-1*f(1)(t);return isNaN(a)?(o=-1e3,s=1e3,c=i,h=i):isFinite(a)?(o=-1e3,s=1e3,u=d(i)(a*r),c=o*a+u,h=s*a+u):(o=r,s=r,c=-1e3,h=1e3),E(I(o,c),I(s,h))},S.prototype.toVector=function(){const{slope:t,length:e}=this;let n=P(t);n=isNaN(n)?0:n;const r=e;return j.of(n,r)},S.prototype.addVector=function(t){this.start=this.start.addVector(t),this.end=this.end.addVector(t)},Object.defineProperties(S.prototype,{slope:{get:function(){if(this.start.x!=this.end.x)return f(this.end.y-this.start.y)(this.end.x-this.start.x)}},length:{get:function(){return g(l(this.end.x-this.start.x)(2)+l(this.end.y-this.start.y)(2))},set:function(t){const{x:e,y:n}=this.start,r=this.end.x-e>0?1:-1,i=this.end.y-n>0?1:-1,o=u(Math.atan(this.slope),2);return this.end=I(r*u(t*x(o)-e,2),i*u(t*y(o)-n,2)),!0}},distance:{get:function(){return this.length},set:function(t){return this.length=t,!0}},center:{get:function(){return I(f(this.end.x+this.start.x)(2),f(this.end.y+this.start.y)(2))}},yInt:{get:function(){return this.start.x==this.end.x?0==this.start.y&&0:this.start.y==this.end.y?this.start.y:d(this.start.y)(this.slope*this.start.x)}},xInt:{get:function(){return this.start.y==this.end.y?0==this.start.x&&0:this.start.x==this.end.x?this.start.x:f(-1*(this.slope*this.start.x-this.start.y))(this.slope)}}});const E=(t,e)=>new S(t,e);var _=E;var C={edges:{get:function(){const{vertices:t}=this,e=[];for(let n=0;n<t.length;n++){if(n===t.length-1){e.push(_(t[n],t[0]));break}e.push(_(t[n],t[n+1]))}return e}}};var N={perimeter:{get:function(){return m(this.edges.map(h("length")))}}};var B={apothem:{get:function(){const{edges:t,center:e}=this;return v(t.map(h("center")).map(t=>_(e,t).length))}}};var A={midpoints:{get:function(){return this.edges.map(h("center"))}}};var V={normals:{get:function(){const{edges:t}=this;return t.map(t=>t.toVector().getPerpendicular())}}};function F({center:t,sides:e}){this.center=t,this.sides=e,this.rotation=0}F.prototype.rotate=function(t){return this.rotation+=t,this},Object.defineProperties(F.prototype,{...C,...N,...B,...A,...V});var R=F;var T={area:{get:function(){const{perimeter:t,apothem:e}=this;return f(t*e)(2)}}};const{PI:q,sin:W,cos:z,pow:k}=Math;function G({center:t,radius:e}){R.call(this,{center:t,sides:360}),this.radius=e}G.prototype=Object.create(R.prototype),G.prototype.getPointOnCircle=function(t){const{x:e,y:n}=this.center;return I(u(this.radius*Math.sin(t)+e,2),u(this.radius*Math.cos(t)+n,2))},G.prototype.getPointsOfIntersection=function(t){const{center:e,radius:n}=this,{x:r,y:i}=e,{center:o,radius:s}=t,{x:c,y:h}=o,u=c-r,a=h-i,d=_(e,o).length;if(d>n+s||0==d&&n==s||d<Math.abs(n-s))return;const l=f(n*n-s*s+d*d)(2*d),y=r+p(u)(l/d),x=i+p(a)(l/d),m=g(n*n-l*l),b=p(-a)(m/d),v=p(u)(m/d),M=y-b,P=x-v;return[I(y+b,x+v),I(M,P)]},G.prototype.isPointOnCircle=function(t){return _(this.center,t).length==this.radius},G.prototype.isPointWithinCircle=function(t){return _(this.center,t).length<=this.radius},Object.defineProperties(G.prototype,{vertices:{get:function(){const{rotation:t}=this;return[0,q/4,q/2,3*q/4,q,5*q/4,3*q/2,7*q/4].map(e=>e-M(t)).map(t=>this.getPointOnCircle(t))}},area:{get:function(){return p(q)(k(this.radius,2))},set:function(t){return this.radius=g(f(t)(q)),!0}},diameter:{get:function(){return p(this.radius)(2)},set:function(t){return this.radius=f(t)(2),!0}},circumference:{get:function(){return p(2*q)(this.radius)},set:function(t){return this.radius=f(t)(2*q),!0}},perimeter:{get:function(){return this.circumference}},apothem:{get:function(){return this.radius},set:function(t){return this.radius=t,!0}}}),G.of=({center:t,radius:e})=>new G({center:t,radius:e}),G.from3Points=(t,e,n)=>{if(0==I.orientation(t,e,n))return;let r=[_(t,e),_(e,n)].map(t=>t.getPerpendicular()),i=r[0].getPointOfIntersection(r[1]);if(!i)return console.log("No intersection!"),void console.log(r);const o=_(i,t).length;return G.of({center:i,radius:o})},G.fromLine=t=>{const e=f(t.length)(2),{center:n}=t;return G.of({center:n,radius:e})};var H=G;var X={circumcircle:{get:function(){const{center:t,sideLength:e,sides:n}=this;return H.of({center:t,radius:f(e)(2*x(M(180/n)))})}}};var D={inscribedCircle:{get:function(){const{center:t,apothem:e}=this;return H.of({center:t,radius:e})}}};var J={apothem:{get:function(){const{sideLength:t,sides:e}=this;return Math.abs(f(t)(2*(n=M(180/e),u(Math.tan(n),2))));var n}}};var K={vertices:{get:function(){const{sides:t,rotation:e}=this,n=36e3/t*100,r=(100*n/200*100-100*e)/100;return((t,e,n=1,r=(t=>t))=>{const i=[];for(let o=t;o<e;o+=n)i.push(r(o));return i})(r,360+r,n,M).map(t=>this.circumcircle.getPointOnCircle(t))}}};const Q=(...t)=>e=>t.reduceRight((t,e)=>e(t),e);var U={bottom:{get:function(){return Q(t=>t.y,s,c((t,e)=>e.y-t.y))(this.vertices)}}};function Y({center:t,sides:e,sideLength:n}){R.call(this,{center:t,sides:e}),this.sideLength=n}Y.prototype=Object.create(R.prototype),Object.defineProperties(Y.prototype,{...T,...X,...D,...J,...K,...U});var Z=Y;function $({center:t,sideLength:e}){Z.call(this,{center:t,sides:3,sideLength:e})}$.prototype=Object.create(Z.prototype),$.of=({center:t,sideLength:e})=>new $({center:t,sideLength:e});var tt=$;function et({center:t,sides:e}){R.call(this,{center:t,sides:e})}et.prototype=Object.create(R.prototype),Object.defineProperties(et.prototype,{...D});var nt=et;var rt=(t,e)=>n=>{const r=x(M(e)),i=y(M(e)),o={...n};o.x-=t.x,o.y-=t.y;const s=o.x*i-o.y*r+t.x,c=o.x*r+o.y*i+t.y;return I(s,c)};function it({center:t,length:e,width:n}){nt.call(this,{center:t,sides:4}),this.length=e,this.width=n}it.prototype=Object.create(nt.prototype),it.prototype.covers=function(t){const{leftmost:e,rightmost:n,topmost:r,bottommost:i}=this,{leftmost:o,rightmost:s,topmost:c,bottommost:h}=t;return o>=e&&s<=n&&c>=r&&h<=i},it.prototype.overlaps=function(t){const{leftmost:e,rightmost:n,topmost:r,bottommost:i}=this,{leftmost:o,rightmost:s,topmost:c,bottommost:h}=t;return!(e>s||n<o||r>h||i<c)},Object.defineProperties(it.prototype,{area:{get:function(){return this.length*this.width}},vertices:{get:function(){const{center:t,length:e,width:n,rotation:r}=this,{x:i,y:o}=t;return[I(i+f(n)(2),o+f(e)(2)),I(i+f(n)(2),o-f(e)(2)),I(i-f(n)(2),o-f(e)(2)),I(i-f(n)(2),o+f(e)(2))].map(rt(t,r))}},circumcircle:{get:function(){const t=this.vertices.slice(0,3);return H.from3Points(...t)}},leftmost:{get:function(){return this.center.x-this.width/2}},rightmost:{get:function(){return this.center.x+this.width/2}},topmost:{get:function(){return this.center.y-this.length/2}},bottommost:{get:function(){return this.center.y+this.length/2}}}),it.of=({center:t,length:e,width:n})=>new it({center:t,length:e,width:n}),it.MBB=function(t){if(t.length<3)return;let e,n,r,i;t.forEach(t=>{if(!e)return e=t.x,n=t.x,r=t.y,void(i=t.y);e>t.x&&(e=t.x),n<t.x&&(n=t.x),r>t.y&&(r=t.y),i<t.y&&(i=t.y)});const o=I((e+n)/2,(r+i)/2),s=i-r,c=n-e;return it.of({center:o,length:s,width:c})},it.getOverlap=function(t,e){if(!t.overlaps(e))return;const n=t.vertices,r=e.vertices,i=Math.max(n[2].x,r[2].x),o=Math.max(n[2].y,r[2].y),s=Math.min(n[0].x,r[0].x),c=Math.min(n[0].y,r[0].y);return it.MBB([I(i,o),I(s,o),I(s,c)])};var ot=it;function st({center:t,sideLength:e}){Z.call(this,{center:t,sides:6,sideLength:e})}st.prototype=Object.create(Z.prototype),st.of=({center:t,sideLength:e})=>new st({center:t,sideLength:e});var ct=st;const ht=function({center:t,sideLength:e}){ot.call(this,{center:t,length:e,width:e}),this.sideLength=e};ht.prototype=Object.create(ot.prototype),Object.defineProperties(ht.prototype,{...X,...U}),ht.of=({center:t,sideLength:e})=>new ht({center:t,sideLength:e});var ut=ht;function at({center:t,sideLength:e}){Z.call(this,{center:t,sides:5,sideLength:e})}at.prototype=Object.create(Z.prototype),at.of=({center:t,sideLength:e})=>new at({center:t,sideLength:e});var dt=at;function pt({center:t,sideLength:e}){Z.call(this,{center:t,sides:8,sideLength:e})}pt.prototype=Object.create(Z.prototype),pt.of=({center:t,sideLength:e})=>new pt({center:t,sideLength:e});var ft=pt;function lt(...t){this.sides=3,this._vertices=[...t],this.rotation=0}lt.prototype=Object.create(R.prototype),Object.defineProperties(lt.prototype,{center:{get:function(){const{_vertices:t}=this,[e,n,r]=t,i=[_(e,n),_(n,r),_(r,e)].map(t=>t.center),[o,s,c]=i,h=_(e,s),u=_(n,c);return h.getPointOfIntersection(u)},set:function({x:t,y:e}){const{center:n}=this,r=t-n.x,i=e-n.y;return this._vertices=this._vertices.map(t=>(t.x+=r,t.y+=i,t)),!0}},inscribedCircle:{get:function(){const{center:t,apothem:e}=this;return H.of({center:t,radius:e})}},vertices:{get:function(){const{rotation:t,_vertices:e,center:n}=this;return e.map(rt(n,t))}},circumcircle:{get:function(){const{vertices:t,center:e}=this,n=b(t.map(t=>_(t,e).length));return H.of({center:e,radius:n})}}}),lt.from3Points=function(...t){return new lt(...t)};var gt=lt;function yt(t,e){this.box=t,this.children=[],this.root=e}function xt(t,e){this.box=t,this.obj=e}function mt(t,e,n){this.box=ot.of({center:n,length:t,width:e}),this.children=[]}const bt=function(t,e=!0){const n=ot.MBB(t.vertices);if(this.children.length<3){const e=new xt(n,t);return void this.children.push(e)}if(e&&3==this.children.length&&this.children.some(t=>t instanceof xt)){const e=new xt(n,t);this.children.push(e);const r=[...this.children].sort((t,e)=>_(t.box.center,this.box.center).distance-_(e.box.center,this.box.center).distance)[0];this.children=this.children.filter(t=>t!==r);const i=this instanceof yt?this.root:this;return void(r instanceof xt?i.insertShape(r.obj,!1):vt(()=>!0)([],r.children).forEach(t=>{i.insertShape(t.obj,!1)}))}let r=this.children.filter(t=>t instanceof xt);r=0===r.length?this.children.filter(t=>t.children.length<3):r,r=0===r.length?this.children:r;const i=r.map(t=>{const{box:e}=t,r=e.vertices.concat(n.vertices);return{child:t,box:ot.MBB(r)}});i.forEach(t=>{const e=this.children.filter(e=>e!==t.child).reduce((e,n)=>{const r=ot.getOverlap(n.box,t.box);return r?e+r.perimeter:e},0);t.overlapSize=e});const o=Q(s,c((t,e)=>t.overlapSize-e.overlapSize),c((t,e)=>t.box.perimeter-e.box.perimeter))(i),h=this.children.indexOf(o.child);if(this.children[h]instanceof yt)return this.children[h].insertShape(t,e),void(this.children[h].box=o.box);const u=this.children[h],a=this instanceof yt?this.root:this,d=new yt(o.box,a);d.insertShape(t),d.insertShape(u.obj),this.children[h]=d};mt.prototype.insertShape=bt,yt.prototype.insertShape=bt,mt.prototype.bulkInsert=function(t){const e=t.reduce(([t,e],n)=>[n.center.x<t.center.x?n:t,n.center.x>e.center.x?n:t],[t[0],t[t.length-1]]),n=c((t,e)=>t.center.x-e.center.x)(t.filter(t=>!e.includes(t))),r=n.slice(0,2),i=n.slice(n.length-2,n.length),o=n[Math.floor(n.length/2)],s=n.filter(t=>!r.includes(t)&&!i.includes(t)&&t!==o);[...e,o,...r,...i,...s].forEach(t=>this.insertShape(t))},mt.prototype.empty=function(){return this.children=[],this};const vt=t=>(e,n)=>(n.forEach(n=>{n instanceof xt?t(n)&&e.push(n):vt(t)(e,n.children)}),e),Mt=t=>t.length<2?[]:t.reduce((t,e,n,r)=>{if(n==r.length-1)return t;for(let i=n+1;i<r.length;i++)t.push([e,r[i]]);return t},[]),Pt=function(t,e){this.children.length<2||(Ot(this.children,t,e),this.children.filter(t=>t instanceof yt).forEach(n=>{n.detectCollision(t,e)}))},Ot=(t,e,n)=>{Mt(t).forEach(([t,r])=>{if(!t.box.overlaps(r.box))return!1;if(t instanceof xt&&r instanceof xt){let i=e(t.obj,r.obj);return!!i&&n(t.obj,r.obj,i)}const i=ot.getOverlap(t.box,r.box);let o=vt(t=>i.overlaps(t.box))([],[t,r]);const s=Mt(o);if(0==s.length)return;s.map(([t,r])=>{if(!t.box.overlaps(r.box))return!1;const i=e(t.obj,r.obj);return!!i&&(n(t.obj,r.obj,i),!0)})})};mt.prototype.detectCollision=Pt,yt.prototype.detectCollision=Pt;const jt=document.getElementById("canvas"),wt=jt.getContext("2d");function Lt(){jt.height=document.body.clientHeight,jt.width=document.body.clientWidth}const{Circle:It,prototypes:St}=o,{Polygon:Et}=St;function _t(){Lt(),wt.clearRect(0,0,jt.width,jt.height),requestAnimationFrame(_t)}Lt(),_t()}]);